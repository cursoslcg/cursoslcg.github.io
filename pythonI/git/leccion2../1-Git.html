<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Python I</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/hygge.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Python I
### Licenciatura en Ciencias Genómicas, UNAM
### First version: 2022-01-31; Last update: 2022-02-03

---




&lt;style type="text/css"&gt;
/* From https://github.com/yihui/xaringan/issues/147  */
.scroll-output {
  height: 80%;
  overflow-y: scroll;
}
/* https://stackoverflow.com/questions/50919104/horizontally-scrollable-output-on-xaringan-slides */
pre {
  max-width: 100%;
  overflow-x: scroll;
}
&lt;/style&gt;


## Contenido

1. Introducción  
2. Controlador de versiones  
3.  Git  
4. Comenzando a trabajar con Git  
4.1. Instalar y configurar Git  
4.2. Esquema de trabajo de Git  
4.3. Crear un repositorio  
4.4. Inicializar repositorio  
4.5  Crear un programa y agregarlo a git  
4.6. Commit  
4.7. Explorando el historial  
4.8. Comparando archivos  
4.9. Ignorando archivos  
---

# Git

## Objetivo
Al finalizar la lección, podremos llevar el control de las modificaciones que realicemos en nuestros programas, así como identificar cuáles fueron los cambios realizados y las fechas en que ocurrieron, todo esto haciendo uso de Git como controlador de versiones.


---

## Introducción
__Vamos a comenzar a hacer software, pero… ¿qué queremos lograr con el desarrollo de software?__

- Resolver algún problema  

- Que nuestro código pueda ser utilizado por otras personas  

- Que el software sea fácil de entender por mi y por los demás  

- Que sea fácil realizar modificaciones  

- ¡Colaborar con más gente!  

---

## Introducción  

__Para lograrlo necesito...__

- Utilizar estándares de codificación  
  - PEP8 para Python  
  - Guías de estilo de Google https://google.github.io/styleguide/   


- Utilizar notaciones o estándares de nombrado  
  - Camel case  
  - Upper case  

- Buenas prácticas  
  - Encabezado de programas  
  - Documentación interna  
  - Nombrado adecuado de variables y métodos/funciones  
  - Nombrado adecuado de los programas  
  - Organización adecuada del código (carpetas y archivos)  
  - Compartir el código con mis compañeros para obtener retroalimentación  

- Control de versiones del código  


---

## ¿Qué es Markdown?  


__Ventajas de usar Markdown__  

- Escribir para web es más rápido y cómodo. Una vez que te acostumbras y conoces la sintaxis, completas el texto más rápido.  

- Facilidad de uso debido a la sintaxis que emplea.  

- Es más difícil cometer errores de sintaxis.  

- Es perfecto para usarlo con editores de texto minimalistas.  

- Puede compartirse fácilmente entre computadoras, entornos moviles, etc., quedando resuelto de este modo la incomodidad de dar formato a un texto a través de los sistemas  diferentes sistemas donde se encuentre.  

---

## Control de versiones

&lt;img src="img/versiones.png" width="750px" style="display: block; margin: auto;" /&gt;

---

## Control de versiones 

&lt;img src="img/documento.png" width="500px" style="display: block; margin: auto;" /&gt;

---

## Control de versiones 

&lt;img src="img/word.gif" width="450px" style="display: block; margin: auto;" /&gt;

---

## ¿Cómo puedo controlar mi código? 

__Forma manual__

El versionamiento está constituido por dos dígitos, versiones primarias y secundarias (X.Y).

&lt;img src="img/versionManual.png" width="150px" style="display: block; margin: auto 0 auto auto;" /&gt;

Reglas:

&lt;img src="img/reglas.png" width="650px" style="display: block; margin: auto auto auto 0;" /&gt;

---


## ¿Cómo puedo controlar mi código? 

__Forma manual__ 

Aplicando las reglas...  

- Agregar línea de código (algunos print, comentarios internos):   myScript_v0.1.py  

- Cambiar el nombre de una variable:                               myScript_v0.2.py  

- Borrar varias funciones del código:                              myScript_v0.3.py  

- Agregar un método:                                               myScript_v1.0.py  


---


## ¿Cómo puedo controlar mi código? 

__Forma automática__  
por medio de un sistema de control de versiones.  

&lt;img src="img/controladores.png" width="450px" style="display: block; margin: auto;" /&gt;
    

---

## ¿Cómo puedo controlar mi código? 

Un sistema de control de versiones es una herramienta que se encarga por nosotros de __controlar__ todos los cambios que realicemos en nuestros programas, creando __diferentes versiones de nuestros archivos__.  

Además, nos permite decidir cuales cambios serán aplicados para la siguiente versión (cada registro de estos cambios es llamado como commit), además de presentar metadatos acerca de ellos.  

Los sistemas de control de versiones no son nuevos. Herramientas como CVS, o Subversion han estado presentes desde inicios de 1980. Sin embargo, estos han sido considerados anticuados debido a limitaciones en sus capacidades. Actualmente, existen modernos sistemas como Git y Mercurial, que incluyen poderosas herramientas para el trabajo colaborativo y concurrente en los archivos. 


---

## ¿Cómo puedo controlar mi código? 

- Usar un sistema de control de versiones es como si tuvieramos un “undo”o “deshacer” ilimitado.  

- Un sistema de control de versiones también permite que muchas personas trabajar en paralelo.  

&lt;img src="img/admiracion.png" width="250px" style="display: block; margin: auto 0 auto auto;" /&gt;

---

## Pero… ¿Qué es Git?

- Es un sistema de control de versiones para rastrear los cambios de nuestro código durante el desarrollo del software.  

- Está diseñado para coordinar el trabajo entre los programadores o contribuidores.  

- Puede ser utilizado para rastrear los cambios en otros tipos de archivos de texto plano.  
  
&lt;img src="img/logo_git.png" width="250px" style="display: block; margin: auto 0 auto auto;" /&gt;

---

## ¿Cómo trabajo con Git? 

__Git de manera local:__  
- Solo yo puedo tener acceso al código  
- Puedo controlar en mi computadora los cambios que haga al código  
- Mi sotfware se vuelve solo de uso personal  

__Git + GitHub:__ 
- Permitiendo trabajar conjuntamente en una idea  
- Formar una comunidad de varias personas trabajando en un fin común  
- Contribuir a mejorar el código  
- Acceso al código, leerlo, estudiarlo y aprender de él, e incluso hacer cambios y experimentar sin afectar el código original  


---


## Trabajando con Git y GitHub 

&lt;img src="img/git-github.png" width="750px" style="display: block; margin: auto;" /&gt;

---

## Comenzando a trabajar con Git 

1. Instalar y configurar Git  
2. Esquema de trabajo de Git  
3. Crear un repositorio  
4. Inicializar repositorio  
5. Crear un programa y agregarlo a git  
6. Commit  
7. Explorando el historial  
8. Comparando archivos  
9. Ignorando archivos  
.  

&lt;img src="img/gitLocal.png" width="450px" style="display: block; margin: auto;" /&gt;

---

## Instalación de Git 

Revisar si Git está instalado  

- Abrir una terminal (símbolo del sistema en windows):  
- Ejecutar el comando:  

`git --version`  

Si Git no está disponible...  

_Windows:_  &lt;https://gitforwindows.org/&gt;  

_MacOS:_ &lt;https://git-scm.com/download/mac&gt;   

_Linux:_ 
Debian/Ubuntu:`sudo apt-get install git`  
Fedora:`sudo dnf install git`


---

## Configuración de Git

Definiendo mi nombre y correo electrónico:  

`git config --global user.name ”[tuNombre]”`  
`git config --global user.email [tuEmail]`  

El username e email estarán asociados a las siguientes actividades con Git, así como con la interacción GitHub, por lo que se sugiere que el email que se defina sea el mismo que se utilice al momento de crear nuestra cuenta de GitHub.

Para ver los valores de configuración de Git:  
`git config --list`


---


## Esquema de trabajo de Git


&lt;img src="img/esquemaGit.png" width="650px" style="display: block; margin: auto;" /&gt;

_Repositorio_: carpeta que contiene el seguimiento de los cambios que se realicen en el código. 

---

## Creando un repositorio controlado por Git

- Definir la ruta de trabajo  
`/Users/tuUsuario/Desktop`  

- Crear una carpeta  
`mkdir python_class`  

- Entrar a la carpeta  
`cd python_class`  

- Crear la estructura interna  
`mkdir docs lib src test`  

__Buenas prácticas__  
Seguir una estructura de organización de carpetas y archivos para nuestros proyectos.

&lt;img src="img/estructuraDir.png" width="650px" style="display: block; margin: auto;" /&gt;


---

## Creando un repositorio controlado por Git

- Inicializar el repositorio Git  
`git init`  

- Revisar el repositorio  
`ls -la`  

- Comprobar repositorio  
`git status`  

&lt;img src="img/gitInit.png" width="750px" style="display: block; margin: auto;" /&gt;


---

##  Actividad

Imaginemos que dentro del directorio `python_class`:

\# Creamos un sub-directorio llamado analysis  
`$ mkdir analysis`  

\# Vamos al directorio analysis  
`$ cd analysis`  

\# Inicializamos un repositorio Git  
`$ git init`  


__¿Les parece que esta sea una buena idea?__

&lt;img src="img/pensando.png" width="200px" style="display: block; margin: auto auto auto 0;" /&gt;


---

## Creando un repositorio controlado por Git

`git init` inicializa un repositorio Git.


Git almacena y controla todos los cambios que se hagan en el contenido del repositorio mediante el directorio `.git`

&lt;img src="img/admiracion.png" width="150px" style="display: block; margin: auto;" /&gt;

---

##  Controlando los cambios con Git

1.  Entrar al directorio  			
`cd python_class`

2. Descargar de la plataforma de cursos la carpeta data-git  

3. Copiar el programa: reverse-complement.py  
`cp ../../Downloads/data-git/reverse-complement.py ./src/`  

4. Indicar a Git que controle los cambios de mi programa  
`git add reverse-complement.py`

5. Confirmar los cambios realizados  		
`git commit –m “Mensaje”`


---

##  Controlando los cambios con Git

&lt;img src="img/flujoGit.png" width="750px" style="display: block; margin: auto;" /&gt;

---

## Resumen

- Git: sistemas de control de versiones  
- Esquema de trabajo de Git  
&lt;img src="img/esquemaGit2.png" width="450px" style="display: block; margin: auto;" /&gt;

__Comandos Git:__

`git init` inicializar repositorio Git

`git add` agregar y dar seguimiento a los archivos del repositorio Git

`git commit –m “Mensaje”` Formalizar/asegurar los cambios realizados en el repositorio



---

## Definiendo un buen mensaje para el commit

_CLAVE_: Escribe un mensaje que describa con precisión los cambios que se han realizado.  

Los buenos mensajes de commit comienzan con una breve declaración (&lt;50 caracteres) sobre los cambios realizados.  

Si se deseas profundizar en el mensaje se recomienda:  

- Usar `git commit –a` 
- Separar el asunto y cuerpo del commit  
- Limitar el asunto del commit a una línea de 50 caracteres  
- Definir el cuerpo del commit a 72 caracteres  
- En el cuerpo del commit explicar qué y por qué  


&lt;img src="img/commitExt.png" width="250px" style="display: block; margin: auto;" /&gt;


&lt;https://chris.beams.io/posts/git-commit/&gt;

---


## Algunas preguntas...

__¿Una vez creado el repositorio Git puedo moverlo a una nueva ubicación?__  

Si, mientras el directorio .git no se vea afectado, Git seguirá controlando los cambios en el repositorio sin importar que se haya movido a otro lugar.  



__¿Puedo modificar el mensaje de un commit?__  

Si. Puedes podificar el mensaje del commit más reciente:

`git commit --amend -m ”Mensaje”`


---


## Comparando cambios

- Modificar el programa: reverse-complement.py  
`$ nano reverse-complement.py`

- Modificar el encabezado del programa, sección Usage:  
`FILENAME`

- Guardar los cambios  
`ctrl+x`


---

## Comparando cambios

- Comparar las versiones del programa: reverse-complement.py  
`$ git diff`


- Agregar el programa y hacer commit de los cambios  

`$ git add reverse-complement.py`  

`$ git commit - m “mensaje”`


&lt;img src="img/diff.png" width="550px" style="display: block; margin: auto;" /&gt;
---

## Comparando cambios

Volvamos a modificar el archivo reverse-complement.py  
`$ nano reverse-complement.py` 

Modificar el encabezado del programa agregando el archivo de entrada (sección example)  
`% python reverse-complement –i sequence.txt`

Guardar los cambios  
`ctrl+x` 

Comparemos las versiones (diff)  
`git diff`

Ahora usemos  
`$ git diff --staged`



---

## Comparando cambios

¿Por qué no hay ninguna salida?

---

## Comparando cambios

¿Por qué no hay ninguna salida?

&lt;img src="img/diffstaged.png" width="650px" style="display: block; margin: auto;" /&gt;
---

## ¿Qué hemos hecho hasta el momento?

`git log` lista todos los commits realizados en el repositorio en orden cronológico inverso.  

`git log –N` donde N indica el número de commits que queremos obtener.  

&lt;img src="img/gitlog.png" width="650px" style="display: block; margin: auto;" /&gt;

---

## ¿Qué hemos hecho hasta el momento?

`git log --oneline` información reducida  

&lt;img src="img/gitOneline.png" width="650px" style="display: block; margin: auto;" /&gt;

---


## Ramas en Git

Una rama Git es un apuntador que nos permitirá hacer referencia a cada una de las confirmaciones (commits). La rama por defecto de Git es la rama master.  

&lt;img src="img/ramas.png" width="550px" style="display: block; margin: auto;" /&gt;

---

## Ramas en Git

La rama __master__ en Git se crea por defecto al usar el comando git init.  
 
&lt;img src="img/ramas.png" width="250px" style="display: block; margin: auto;" /&gt;

- __develop__: En esta rama se van integrando todas las nuevas características hasta la siguiente release.  
- __feature-X__: Cada nueva mejora o característica que vayamos a introducir en nuestro software tendrá una rama que contendrá su desarrollo. Las ramas de _feature_ salen de la rama _develop_ y una vez completado el desarrollo de la mejora, se vuelven a integrar en _develop_.  
- __hotfix-X__: Si nuestro código contiene bugs críticos que es necesario arreglar de manera inmediata.  

---

## Controlando más de un archivo

&lt;img src="img/add2.png" width="750px" style="display: block; margin: auto;" /&gt;


---

## ¿Cómo identifico el estado de mi repositorio Git?

`git status`  

indica el estado de los archivos que pueden ser controlados por Git, o aquellos que ya están controlados pero se han modificado.


---


## Actividad

Mover el archivo de notas (markdown) creado anteriormente al directorio docs/  
`cp ../../Notas.md ../docs/` 

Conocer el estado del repositorio  
`git status` 

Identificar archivos sin seguimiento  
`git status -u`  


---


## Actividad

- ¿Cuál de los siguientes comandos guardaría los cambios del archivo myfile.txt a mi repositorio local de Git?  

1. `$ git commit -m "my recent changes”`  

2. `$ git init myfile.txt`  
   `$ git commit -m "my recent changes”`  

3. `$ git add myfile.txt`  
   `$ git commit -m "my recent changes”`  

4. `$ git commit -m myfile.txt "my recent changes"`  

---

## Actividad

1. Modificar el archivo `reverse-complement.py`  

2. Agregar al directorio `python_class/src/ el archivo `sequence.txt`  

3. Agregar los cambios al área de preparación (staging area)  

4. Hacer commit de ambos archivos  


---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
  .logo {
    background-image: url(img/LCG-UNAM.png);
    background-size: contain;
    background-repeat: no-repeat;
    position: absolute;
    top: 1em;
    right: 1em;
    width: 110px;
    height: 128px;
    z-index: 0;
  }
  </style>
  
  <script>
  document
    .querySelectorAll(
      '.remark-slide-content' +
      ':not(.title-slide)' +
      // add additional classes to exclude here, e.g.
      // ':not(.inverse)' +
      ':not(.hide-logo)'
    )
    .forEach(el => {
      el.innerHTML += '<div class="logo"></div>';
    });
  </script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
