<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Software Cientifico y la IS</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.18/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/hygge.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Software Cientifico y la IS
]
.institute[
### Licenciatura en Ciencias Genómicas,UNAM
]
.date[
### First version: yyy-mm-dd; Last update: 2024-02-01
]

---




&lt;style type="text/css"&gt;
/* From https://github.com/yihui/xaringan/issues/147  */
.scroll-output {
  height: 80%;
  overflow-y: scroll;
}
/* https://stackoverflow.com/questions/50919104/horizontally-scrollable-output-on-xaringan-slides */
pre {
  max-width: 100%;
  overflow-x: scroll;
}
&lt;/style&gt;



# Contenido

1. Introducción ( El problema )

2. FAIR

3. Ingeniería de Software

4. subconjunto mínimo de principios comunesde IS


---
# Objetivo

Comprender la importancia de las buenas prácticas para desarrollar software científico.

---

# Introducción


.pull-left[
&lt;img src="https://www.software.ac.uk/sites/default/files/images/content/ResearchSoftwareSurveyWordle27Nov14%20copy.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.pull-right[

- Muchos resultados en la literatura científica ahora dependen del software. 

- Las hipótesis se construyen a partir de los resultados de modelos computacionales. 

- Los datos se recopilan y analizan mediante paquetes comerciales, módulos de código abierto y scripts personalizados. 
- El software es fundamental para la accesibilidad y reutilización de los datos científicos y la verificación de los métodos científicos. 

]

.tiny[
[Graham Lee, et al. Barely sufficient practices in scientific computing](https://www.cell.com/patterns/pdf/S2666-3899\(21\)00016-7.pdf)]

---

# Encuesta 

De los científicos encuestados por Pinto et al. en 2018

- el **86 % ** informa que desarrollar software científico es importante para su propia investigación y 

--

- el **63 %** que es importante para la investigación de otros. 

--

- El encuestado promedio informó que dedicaba el **30 % ** de su tiempo de trabajo a escribir software científico.

--

- El diseño y la construcción de software de investigación sigue siendo en gran medida una industria artesanal.

- El **99%** de los encuestados dijeron que el autoaprendizaje era importante para la adquisición de habilidades de desarrollo de software. 


.tiny[
[Pinto et al. How do scientists develop scientific software? An external replication](https://ieeexplore.ieee.org/document/8330263)]



---

# Encuesta 

Lejos de ponerse de acuerdo sobre las mejores prácticas en toda la investigación computacional, se tienen **prácticas de software divergentes** que conducen a **diferentes niveles** de **confiabilidad**, replicabilidad y reutilización del software de investigación. 


.tiny[
[Graham Lee, et al. Barely sufficient practices in scientific computing](https://www.cell.com/patterns/pdf/S2666-3899\(21\)00016-7.pdf)]

---

# ¿ Cuál es el problema del software de investigación ?


El software escrito **sin la debida atención a las prácticas de ingeniería** relevantes puede sufrir muchos problemas.

Dos casos presentados sobre la enfermedad por coronavirus 2019 (COVID-19) :

- Caso 1. The Lancet publicó, y luego se retractó, un análisis de los efectos del tratamiento con hidroxicloroquina o cloroquina para el COVID-19. 

- Caso 2. Se utilizó un modelo de propagación de la pandemia producido en el Imperial College de Londres para justificar las políticas gubernamentales relacionadas con el confinamiento en marzo de 2020.

---

# Caso Lancet

.content-box-blue[

¿ Qué habian publicado inicialmente?

¿ Qué fué lo que corrigieron ?

¿ Dónde estuvo el problema ?

¿ Qué aprendemos ?


.tiny[
[NYT Journal: Two Huge Covid-19 Studies Are Retracted After Scientists Sound Alarms](https://www.nytimes.com/2020/06/04/health/coronavirus-hydroxychloroquine.html)]

]

---

# Caso Lancet: Resumen

Los estudios, publicados en revistas científicas de renombre, produjeron resultados sorprendentes y **alteraron el curso de la investigación sobre la pandemia de coronavirus**.

Uno de ellos socavó la afirmación del presidente Trump de que ciertos medicamentos antipalúdicos curan el Covid-19 , la enfermedad causada por el virus, y **concluyó que los medicamentos en realidad eran peligrosos para los pacientes**. El otro encontró que algunos medicamentos para la presión arterial no aumentaban el riesgo de Covid-19 e incluso podrían tener un efecto protector.

Ambos estudios fueron dirigidos por un profesor de Harvard y ambos dependían de una enorme **base de datos** internacional de **registros médicos** de pacientes de la que pocos expertos habían oído hablar.

Los estudios fueron retractados por las revistas científicas en las que habían aparecido, The New England Journal of Medicine y The Lancet, porque **los autores no pudieron verificar los datos de los que dependían los resultados**.

.tiny[
[Two Huge Covid-19 Studies Are Retracted After Scientists Sound Alarms](https://www.nytimes.com/2020/06/04/health/coronavirus-hydroxychloroquine.html)]

---

# Caso Lancet: Lo que aprendemos


- En la retractación, el profesor Mehra indica que **los datos y el software** en los que se basó el análisis **no estaban disponibles para la revisión o replicación por pares independientes**.

- "Ahora me queda claro que con la esperanza de contribuir a esta investigación durante un momento de gran necesidad, no hice lo suficiente para **garantizar que la fuente de datos fuera adecuada para este uso**", dijo el Dr. Mandeep Mehra

- "La ubicuidad de los "grandes datos" puede ser tentadora para los investigadores, agregó, pero aún **deben comprender de dónde provienen los datos, su autenticidad y calidad.**"

.tiny[
[Two Huge Covid-19 Studies Are Retracted After Scientists Sound Alarms](https://www.nytimes.com/2020/06/04/health/coronavirus-hydroxychloroquine.html)]


---

# Caso 2: Imperial College de Londres

.content-box-blue[

¿ Qué habian publicado inicialmente?

¿ Qué fué lo que corrigieron ?

¿ Dónde estuvo el problema ?

¿ Qué aprendemos ?

.tiny[
[INFLUENTIAL PANDEMIC SIMULATION VERIFIED BY CODE CHECKERS ](https://media.nature.com/original/magazine-assets/d41586-020-01685-y/d41586-020-01685-y.pdf)]

]

---
# Caso 2: Imperial College - Resumen

**Un modelo de propagación de la pandemia producido en el Imperial College de Londres para justificar las políticas gubernamentales relacionadas con el confinamiento en marzo de 2020.**

El código sustenta una **influyente simulación** de coronavirus realizada por científicos del Imperial College de Londres, uno de varios modelos que ayudaron a convencer a los políticos del Reino Unido para que **declarara el confinamiento**.

Algunos artículos mencionaron que no se podían repetir la simulación, lo que arrojaba más dudas sobre el estudio. Un neurocientífico computacional informó que ha vuelto a ejecutar la simulación de forma independiente y reprodujo sus resultados.

Los científicos no pusieron el código de la simulación a disposición del escrutinio público. Cuando se lanzó una versión mejorada a finales de abril, los ingenieros de software menospreciaron su calidad y dijeron que la simulación necesitaba
ser repetido por otros. 

.tiny[
[INFLUENTIAL PANDEMIC SIMULATION VERIFIED BY CODE CHECKERS](https://media.nature.com/original/magazine-assets/d41586-020-01685-y/d41586-020-01685-y.pdf)]

---
# Caso Imperial College - loq ue aprendemos

- Inicialmente el modelo no estaba disponible para el escrutinio externo y lo hicieron público 3 meses después de su publicación, por presiones.

- La confianza pública en el modelo ya se había erosionado, una situación que podría haberse evitado **documentando** y **probando** el software cuando se utilizó por primera vez.

- "El código del estudio se veía **"horrible"**, pero tales deficiencias se esperan en el código escrito por científicos que no son **especialistas en desarrollo de software**." El autor dijo "Cleaning up and releasing the code **was not a top priority at the time**."


.tiny[
[INFLUENTIAL PANDEMIC SIMULATION VERIFIED BY CODE CHECKERS](https://media.nature.com/original/magazine-assets/d41586-020-01685-y/d41586-020-01685-y.pdf)]

]

---

# Varios conceptos

- revisado por **Ingenieros de software** ...  

- no son especialistas en **Desarrollo de software**  

- El **Software científico** bajo escrutinio ...  

- haberse evitado **documentando** y **probando** ..  

- verificar la **Calidad de datos**    

- dudas sobre la **Calidad de software** en la ciencia  

---

# El desarrollo de software de calidad

"La **Ingeniería de Software** es una de las ramas de las ciencias de la computación que estudia la creación de software confiable y de calidad, basándose en **procesos y métodos y técnicas de ingeniería**, y brindando soporte operacional y de mantenimiento." [Wikipedia](https://es.wikipedia.org/wiki/Ingenier%C3%ADa_de_software)

.pull-left[
&lt;img src="https://blog.innevo.com/hs-fs/hubfs/Blog%20Centro%20de%20Mejora/Im%C3%A1genes%20de%20Apoyo/BLOG%20-%2033%20-%20Calidad%20Desarrollo%20Software_CicloVidaDesarrolloC.png?width=1684&amp;height=1352&amp;name=BLOG%20-%2033%20-%20Calidad%20Desarrollo%20Software_CicloVidaDesarrolloC.png" width="100%" style="display: block; margin: auto;" /&gt;

.tiny[Fuente https://blog.innevo.com/calidad-en-el-desarrollo-de-software]

]

.pull-right[

**[Modelos para el desarrollo de software](https://blog.innevo.com/calidad-en-el-desarrollo-de-software)**: cascada, prototipos, espiral, por etapas, etc.

**Estándares y Métricas De Calidad de la gestión de proyectos**: ISO 9000, CMMI, SPICE, MoProSfot

**[Roles](http://profayadira.yolasite.com/resources/Roles_desarrollo_software.pdf)**: .tiny[ Administrador de proyectos, analistas, diseñadores, programadores, tester, aseguradores de calidad, administrador de configuración, ing. de validación y verificación, documentador, ing de mantenimiento ]

**Productos**: En cada fase se generan productos de trabajo, más de 30 productos en total.

]
---

# Pero ... Qué es el software científico (SC) ?

.pull-left[
&lt;img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTjKlVP6wguUJw93ACMUk3X-kcoqATc1xFvAg&amp;usqp=CAU" width="50%" style="display: block; margin: auto;" /&gt;
]

--

El *software de investigación* incluye **archivos de código fuente**, **algoritmos**, **scripts**, **documentacion**, **flujos de trabajo computacionales y ejecutables** que se crearon durante el proceso de investigación o con un propósito de investigación. 

--

&lt;br&gt;

Los componentes de software (por ejemplo, sistemas operativos, bibliotecas, dependencias, paquetes, scripts, etc.) que se utilizan para la investigación pero **que no fueron creados** durante o con una clara intención de investigación deben considerarse software **en** investigación y no software **de** investigación


.tiny[ Patel, B., Soundarajan, S., Ménager, H. et al. Making Biomedical Research Software FAIR: Actionable Step-by-step Guidelines with a User-support Tool. Sci Data 10, 557 (2023). https://doi.org/10.1038/s41597-023-02463-x ]

---

# Componentes de software

RSAT Suite

Código  https://github.com/rsa-tools/rsat-code/blob/master/python-scripts/random-motif

workflows: https://github.com/rsa-tools/rsat-snakemake/blob/315a220da1a333e8c98fdb650f5003b17f0fed0a/makefiles/install_environment.mk#L11

Documentación: http://rsa-tools.github.io/teaching/


---
# Qué tanto SC existe?

Evolución del número de nuevos repositorios de software relacionados con la biomedicina creados en GitHub 

&lt;img src="https://translate.google.com/website?sl=auto&amp;tl=es&amp;hl=es-419&amp;u=https://media.springernature.com/full/springer-static/image/art%253A10.1038%252Fs41597-023-02463-x/MediaObjects/41597_2023_2463_Fig1_HTML.png?as%3Dwebp" width="70%" style="display: block; margin: auto;" /&gt;

---

# La importancia del SC

El software de investigación se ha convertido en un **activo esencial** de la investigación científica y, por lo tanto, se ha vuelto *fundamental preservarlo, compartirlo y hacerlo reutilible*.

Los principios rectores Localizable, Accesible, Interoperable y Reutilizable (**FAIR**) proporcionan una base para lograrlo.

---

# Actividad

Tiempo : [10 min]

.content-box-green[

En grupos de 3, discutir la sección del ABSTRACT Y LA INTRODUCCION

Patel, B., Soundarajan, S., Ménager, H. et al. Making Biomedical Research Software FAIR: Actionable Step-by-step Guidelines with a User-support Tool. Sci Data 10, 557 (2023). https://doi.org/10.1038/s41597-023-02463-x

]

Y responder lo siguiente:

1. Qué es FAIR ?

2. Para qué sirve FAIR?

3. Porqué es importante ?

Pon tus respuestas en nuestro [cuaderno colaborativo](https://etherpad.wikimedia.org/p/LCG-PythonI)

---

# Actividad

Tiempo : [10-15 min]

.content-box-green[
En grupos de 3, discutir la sección del RESULTADOS

Hay 5 categorías de alto nivel para cumplir los principios FAIR4RS

Describe brevemente lo que implican

.tiny[ 
Categoría 1: Desarrollar software siguiendo estándares y mejores prácticas.  
Categoría 2: Incluir metadatos  
Categoría 3: Proporcionar una licencia  
Categoría 4: Compartir software en un repositorio  
Categoría 5: Inscribirse en un registro

]

Las prácticas y recomendaciones se resumen en la guía [FAIR-BioRS](https://github.com/FAIR-BioRS/Guidelines/tree/main/main)

] 

Pon tus respuestas en nuestro [cuaderno colaborativo](https://etherpad.wikimedia.org/p/LCG-PythonI)

**También comenta Cuáles de ellas ya aplicas cuando has desarrollado software?**



---

# Check List of FAIR-BioRS guidelines v2.0.0

.tiny[

1. Prepare prior to the development of the software:   
1.1. **Version control system platform : Usaremos Git y GitHub**  
1.2. **license:  MIT or Apache 2.0* **   

2. Follow coding standards and best practices during development  
2.1 **code-level documentation: template.py**  
2.2 **Record dependencies: [package.json](https://docs.npmjs.com/creating-a-package-json-file)**  
2.3 **Language-specific standards and best practices : PEP8**  
2.4 **Inputs/outputs of the software follow any applicable community standards**  

3. Document software  
3.1 **README**  
    - Web site using GitHub  
    - Documentation for research software: Write the Docs, Doxygen, Sphinx3  
3.2 **ChangeLog**  

4. Include metadata files  
4.1 **[Codemeta.json](https://github.com/codemeta/codemeta/blob/master/examples/codemeta.json) metadata**  
4.2 **[CITATION.cff](https://citation-file-format.github.io/#/what-is-a-citation-cff-file) metadata file** ([tool](https://citation-file-format.github.io/cff-initializer-javascript/#/))

5. Share software on a repository  
5.1 **PyPI or Conda for Python packages**  
5.2 Zenodo or Figshare repository   
5.3 Archive the software repository on Software Heritage  

6. Register software on a registry  
6.1  bio.tools registry or Research Resource Identifiers (RRID) Portal  

]

---

# Actividad

[Tiempo: 15 min.]

.content-box-green[

Selecciona al menos 2 de los siguientes proyectos de software y usando el checklist de FAIR-BioRS, verifica cúantos de ellos cumplen con los principios FAIR:

https://github.com/cytoscape/cytoscape.js  
https://github.com/regulondbunam/GraphQL-api  
https://github.com/GMOD/jbrowse  
https://github.com/rsa-tools/rsat-code/tree/master  
https://github.com/lcolladotor/derfinder  

]

Pon tus respuestas en nuestro [cuaderno colaborativo](https://etherpad.wikimedia.org/p/LCG-PythonI)

---

# Preparándonos para hacer software!

Para prepararnos para el desarrollo de software siguiendo las recomendaciones FAIR4RS vamos a organizar nuestros directorios y crear nuestras plantillas.

* **Repositorio template**  

   Todo proyecto de desarrollo requiere de una estructura donde vamos a organizar todos los productos de trabajo generados durante el desarrollo. Crea un repo-template que tenga los directorios de 
   - src (codigo fuente)
   - lib (librerias a usar)
   - docs (documentación)
   - tests (para las pruebas)
  
```{}  
github-rs
└── template-repo
    ├── docs
    ├── lib
    ├── src
    └── tests
```
    
---

# Preparándonos para hacer software!

* Plantilla para programas en python  

El FAIR4RS recomienda en el punto  2.1 **code-level documentation**, es decir todo programa debe tener un encabezado y comentarios internos en el código. Vamos a generar una plantilla llamada program_template.py donde vamos a poner el encabezado que debe tener todo programa, por ejemplo ver

Ejemplo:

Aquí puedes ver un [ejemplo real](https://github.com/rsa-tools/rsat-code/blob/master/python-scripts/random-motif)

Descarga un [template](https://lcg-cursos.github.io/material/pythonI/python/templates/template_program.py) y ajustalo si es necesario:

Esta plantilla debes colocarla en `src`

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
  .logo {
    background-image: url(img/LCG-UNAM.png);
    background-size: contain;
    background-repeat: no-repeat;
    position: absolute;
    top: 1em;
    right: 1em;
    width: 110px;
    height: 128px;
    z-index: 0;
  }
  </style>
  
  <script>
  document
    .querySelectorAll(
      '.remark-slide-content' +
      ':not(.title-slide)' +
      // add additional classes to exclude here, e.g.
      // ':not(.inverse)' +
      ':not(.hide-logo)'
    )
    .forEach(el => {
      el.innerHTML += '<div class="logo"></div>';
    });
  </script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
